(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{352:function(e,t,o){"use strict";o.r(t);var a=o(42),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"manual-checks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#manual-checks"}},[e._v("#")]),e._v(" Manual Checks")]),e._v(" "),o("h2",{attrs:{id:"apache-zookeeper"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#apache-zookeeper"}},[e._v("#")]),e._v(" Apache Zookeeper")]),e._v(" "),o("p",[e._v("As the cluster is now ready, we will make sure that Apache Zookeeper works fine.\nConnect to the Apache Zookeeper node:")]),e._v(" "),o("p",[e._v("For example")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("docker-compose -f kafka-cluster.yml exec zk-1 bash\n")])])]),o("p",[e._v("Once connected, use the "),o("code",[e._v("zooKeeper-shell")]),e._v(" command to check the cluster's state:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("zookeeper-shell 127.0.0.1:2181\n")])])]),o("p",[e._v("Check out the root nodes with the following command:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("ls /\n[admin, brokers, cluster, config, consumers, controller, controller_epoch, isr_change_notification, latest_producer_id_block, log_dir_event_notification, schema_registry, zookeeper]\n")])])]),o("p",[e._v("Now let's make sure that the node is well registered:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("ls /brokers/ids # Gives the list of active brokers\nls /brokers/topics #Gives the list of topics\nget /brokers/ids/0 #Gives more detailed information of the broker id '0'\n")])])]),o("h2",{attrs:{id:"zookeeper-commands-the-four-letter-words"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-commands-the-four-letter-words"}},[e._v("#")]),e._v(" ZooKeeper Commands: The Four Letter Words")]),e._v(" "),o("blockquote",[o("p",[e._v("ZooKeeper responds to a small set of commands. Each command is composed of four letters. You can issue the commands to ZooKeeper via telnet or nc, at the client port.*\n"),o("a",{attrs:{href:"https://zookeeper.apache.org/doc/r3.1.2/zookeeperAdmin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Zookeeper documentation"),o("OutboundLink")],1)])]),e._v(" "),o("p",[e._v("To be able to use the commands, add the following option when starting the application\n"),o("code",[e._v('KAFKA_OPTS: "-Dzookeeper.4lw.commands.whitelist=*"')])]),e._v(" "),o("p",[e._v("Check if server is running in a non-error state. The server will respond with "),o("code",[e._v("imok")]),e._v(" if it is running. Otherwise it will not respond at all.\nHere's an example of the ruok command:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("echo ruok | nc 127.0.0.1 2181\nimok\n")])])]),o("p",[e._v("Find all commands in the documentation Apache Zookeeper\n"),o("a",{attrs:{href:"https://zookeeper.apache.org/doc/r3.1.2/zookeeperAdmin.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Zookeeper documentation"),o("OutboundLink")],1)]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("A work is in progress to remove the Apache ZooKeeper Dependency.\nYou can follow it with this "),o("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/KAFKA/KIP-500%3A+Replace+ZooKeeper+with+a+Self-Managed+Metadata+Quorum",target:"_blank",rel:"noopener noreferrer"}},[e._v("KIP-500"),o("OutboundLink")],1),e._v(" and read more about it in "),o("a",{attrs:{href:"https://www.confluent.io/blog/removing-zookeeper-dependency-in-kafka/",target:"_blank",rel:"noopener noreferrer"}},[e._v("this blog post"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("h2",{attrs:{id:"apache-kafka"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#apache-kafka"}},[e._v("#")]),e._v(" Apache Kafka")]),e._v(" "),o("h3",{attrs:{id:"logs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[e._v("#")]),e._v(" Logs")]),e._v(" "),o("p",[e._v("Like any other application, it's possible to browse logs to verify that the broker is running correctly.\nConfluent Docker images are configured to send all logs to "),o("code",[e._v("stdout")]),e._v(" by default. The configuration is written in the "),o("code",[e._v("/etc/kafka/log4j.properties")]),e._v(" file.")]),e._v(" "),o("p",[e._v("To browse these logs:")]),e._v(" "),o("div",{staticClass:"language-shell script extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[e._v("docker-compose -f kafka-cluster.yml logs kafka-1\n")])])]),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("Add "),o("code",[e._v("-f")]),e._v(" or "),o("code",[e._v("--follow")]),e._v(" to continue streaming the logs")])]),e._v(" "),o("p",[e._v("With a classic installation, the broker will write its logs in several files inside "),o("code",[e._v("/var/log/kafka")]),e._v(":")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://docs.confluent.io/1.0.1/kafka/post-deployment.html#logging",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("server.log")]),e._v(" file"),o("OutboundLink")],1)]),e._v(" "),o("blockquote",[o("p",[e._v("The logs from the server go to logs/server.log.")])]),e._v(" "),o("p",[o("a",{attrs:{href:"https://docs.confluent.io/1.0.1/kafka/post-deployment.html#controller",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("controller.log")]),e._v(" file"),o("OutboundLink")],1)]),e._v(" "),o("blockquote",[o("p",[e._v("The controller is responsible for cluster management and handles events like broker failures, leader election, topic deletion and more.")])]),e._v(" "),o("p",[o("a",{attrs:{href:"https://docs.confluent.io/1.0.1/kafka/post-deployment.html#state-change-log",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("state-change.log")]),e._v(" file"),o("OutboundLink")],1)]),e._v(" "),o("blockquote",[o("p",[e._v("The controller does state management for all resources in the Kafka cluster.\nThis includes topics, partitions, brokers and replicas. As part of state management, when the state of any resource is changed by the controller,\nit logs the action to a special state change log stored under logs/state-change.log.")])]),e._v(" "),o("p",[o("code",[e._v("log-cleaner.log")]),e._v(" contains logs from LogCleaner and topic compaction activities.")]),e._v(" "),o("p",[e._v("Here's default "),o("a",{attrs:{href:"https://github.com/apache/kafka/blob/trunk/config/log4j.properties",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("log4j.properties")]),o("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);